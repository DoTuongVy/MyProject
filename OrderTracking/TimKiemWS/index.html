<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tìm kiếm WS - Order Tracking</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../../auth.css">
    <link rel="stylesheet" href="styles.css">

</head>
<body>
    <div class="header-container">
        <div class="container">
            <div class="header-title">Order Tracking System</div>
            <div class="header-subtitle">Tìm kiếm và theo dõi tiến độ sản xuất theo WS</div>
        </div>
    </div>

    <div class="container">
        <!-- Search Section -->
        <div class="search-container">
            <i class="fas fa-search search-icon"></i>
            <input type="text" class="search-input" id="wsSearchInput" placeholder="Nhập số WS để tìm kiếm (VD: 2139221-O)">
            <button class="search-btn" id="searchBtn">TÌM KIẾM</button>
            <!-- Suggestions dropdown -->
<div class="suggestions-dropdown" id="suggestionsDropdown">
    <div class="suggestions-list" id="suggestionsList">
        <!-- Dynamic suggestions will be added here -->
    </div>
</div>
        </div>
        
        <!-- Loading Spinner -->
        <div class="loading-spinner" id="loadingSpinner">
            <div class="spinner-border" role="status">
                <span class="visually-hidden">Đang tìm kiếm...</span>
            </div>
            <div class="mt-3">Đang tìm kiếm dữ liệu...</div>
        </div>
        
        <!-- Error Message -->
        <div class="error-message" id="errorMessage">
            <i class="fas fa-exclamation-triangle me-2"></i>
            <span id="errorText">Có lỗi xảy ra khi tìm kiếm</span>
        </div>
        
        <!-- Order Information -->
        <div class="order-info" id="orderInfo">
            <div class="order-number" id="orderNumber">SỐ WS: </div>
            <div class="order-details">
                <span id="orderDetails">Tìm thấy <strong id="totalStages">0</strong> công đoạn</span>
            </div>
        </div>
        
        <!-- Stages Container -->
        <div class="stage-container" id="stageContainer">
            <!-- Stages will be rendered here -->
        </div>
        
        <!-- No Results -->
        <div class="no-results" id="noResults">
            <i class="fas fa-search"></i>
            <h4>Không tìm thấy dữ liệu</h4>
            <p>Không có dữ liệu sản xuất cho WS này hoặc WS chưa được bắt đầu sản xuất</p>
        </div>
        
        <!-- Detail Table Container -->
        <div id="detailContainer" class="detail-table-container">
            <div class="detail-table-header">
                <h5 id="detailTitle" class="detail-table-title">CHI TIẾT CÔNG ĐOẠN</h5>
                <button class="close-btn" onclick="closeDetail()">ĐÓNG</button>
            </div>
            
            <div class="filter-dropdown">
                <select class="filter-select" id="machineFilter">
                    <option value="">LỌC THEO MÁY</option>
                </select>
            </div>
            
            <div class="table-responsive">
                <table class="table detail-table mb-0" id="detailTable">
                    <thead id="detailTableHead">
                        <!-- Dynamic headers -->
                    </thead>
                    <tbody id="detailTableBody">
                        <!-- Dynamic data -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script src="../production-process.js"></script>
    <script src="./tracking-search.js"></script>
    <script src="../../auth.js"></script>
    <script src="../../utils.js"></script>
</body>
</html>