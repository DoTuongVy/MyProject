<!DOCTYPE html>
<html lang="vi">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Báo cáo SCL</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet">
    <link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="./style.css">
    <link rel="stylesheet" href="../auth.css">

    <link rel="icon" type="image/x-icon" href="/assets/favicon.ico">
    <link rel="icon" type="image/png" sizes="" href="/assets/LOGO.png">
    
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

    <style>
    .progress,
    .progress-stacked {
      display: flex;
      height: var(--bs-progress-height);
      overflow: hidden;
      font-size: var(--bs-progress-font-size);
      background-color: #bfbfbf;
      border-radius: var(--bs-progress-border-radius);
    }

    /* Đảm bảo không wrap chữ trong các ô */
    .text-nowrap {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .dropdown-menu {
  z-index: 2000 !important;
}


  </style>
  </head>

  <body class="bg-light p-4">
    <img src="../logo.gif" alt width="20%"
      style="display: block; margin: 20px auto;">

    <!-- Tab Nav -->
    <nav>
      <div class="nav nav-tabs justify-content-center" id="nav-tab"
        role="tablist" style="font-size: 20px;">
        <button class="nav-link active" id="nav-baocaoscl-tab"
          data-bs-toggle="tab" data-bs-target="#nav-baocaoscl"
          type="button" role="tab" aria-controls="nav-baocaoscl"
          aria-selected="true">Báo Cáo SCL</button>
        <button class="nav-link" id="nav-danhsachscl-tab" data-bs-toggle="tab"
          data-bs-target="#nav-danhsachscl"
          type="button" role="tab" aria-controls="nav-danhsachscl"
          aria-selected="false">Báo cáo sản xuất</button>
        <button class="nav-link" id="nav-dungmayscl-tab" data-bs-toggle="tab"
          data-bs-target="#nav-dungmayscl"
          type="button" role="tab" aria-controls="nav-dungmayscl"
          aria-selected="false">Báo cáo dừng máy</button>

      </div>

      <!-- Content tab -->
    </nav>

    <!-- Phần báo cáo -->
    <div class="tab-content" id="nav-tabContent">
      <div class="tab-pane fade show active" id="nav-baocaoscl" role="tabpanel"
        aria-labelledby="nav-baocaoscl-tab"
        tabindex="0">

        <!-- Bắt đầu báo cáo -->
        <div
          class="container bg-white p-4 rounded shadow position-relative border border-success rounded-top p-3 mt-5 "
          style="border-width: 2px;">

          <div class="d-flex justify-content-end mb-3">
            <button type="button" id="btnResetForm" class="btn btn-warning">
              <i class="fas fa-sync-alt me-1"></i> Chạy lại phiếu
            </button>
          </div>

          <div
            class="position-absolute start-50 translate-middle-x px-3 py-1 bg-white border border-primary rounded-pill"
            style="top: -16px;">
            <strong>Thời gian bắt đầu :</strong> <span
              class="text-success fw-bold" id="startTime"></span>
          </div>

          <div class="row g-2">

            <div class="col-md-4">
              <!-- Chọn máy -->
              <div class="form-floating mb-3" style="flex: 1 0 0%;">
                <select class="form-select" id="may" required
                  style="border: 1px solid blue;">
                  <option value selected>-- Chọn máy --</option>
                  <option value="SCL 1">SCL 1</option>
                </select>
                <label for="may">Máy</label>
              </div>
            </div>

            <div class="col-md-2">
              <!-- Ca + Người -->
              <div class="d-flex gap-2 mb-3">
                <div class="form-floating" style="flex: 1 0 0%;">
                  <select class="form-select" id="ca" required
                    style="border: 1px solid blue;">
                    <option value selected>-- Chọn ca --</option>
                    <option value="0">Ca A</option>
                    <option value="1">Ca B</option>
                    <option value="2">Ca HC</option>
                  </select>
                  <label for="ca">Ca</label>
                </div>
              </div>
            </div>

            <div class="col-md-4">
              <!-- GIờ làm việc -->
              <div class="d-flex gap-2 mb-3">
                <div class="form-floating" style="flex: 1 0 0%;">
                  <select class="form-select" id="gioLamViec" required
                    style="border: 1px solid blue;">
                    <option value selected>-- Giờ làm việc --</option>
                    <option value="0">6H - 14H</option>
                    <option value="1">14H - 22H</option>
                    <option value="2">22H - 6H</option>
                    <option value="3">10H - 22H</option>
                    <option value="4">6H - 18H</option>
                    <option value="5">18H - 6H</option>
                    <option value="6">7H - 16H</option>
                    <option value="7">7H -15H</option>
                    <option value="8">7H - 17H</option>
                    <option value="9">8H - 17H</option>
                  </select>
                  <label for="gioLamViec">Giờ làm việc</label>
                </div>
              </div>
            </div>

            <div class="col-md-2">
              <div class="form-floating flex-grow-1 disabled ">
                <input type="text" class="form-control bg-info" id="maCa"
                  disabled style="border: 1px solid blue;">
                <label for="maCa">Mã Ca</label>
              </div>
            </div>

          </div>
          <div class="row g-4">

            <!-- Cột Trái -->
            <div class="col-md-6">
              <div class="row">
                <div class="col">
                  <!-- Số phiếu -->
                  <div class="form-floating mb-3">
                    <input type="text" class="form-control" id="soPhieu"
                      placeholder="Số phiếu Sang cuộn" value="PSC">
                    <label for="soPhieu">Số phiếu Sang cuộn</label>
                  </div>
                </div>

                <div class="col">
                  <div class="form-floating mb-3">
                    <input type="text" class="form-control" id="ws"
                      placeholder="Số WS" disabled style="color: blue;">
                    <label for="ws">Số WS</label>
                  </div>
                </div>
              </div>

              <!-- Thứ tự -->
              <div class="form-floating mb-3">
                <select class="form-select" id="thuTu">
                  <option selected>-- Thứ tự --</option>
                  <option value="1">1</option>
                  <option value="2">2</option>
                </select>
                <label for="thuTu">Thứ tự</label>
              </div>
            </div>

            <!-- Cột Phải -->
            <div class="col-md-6">

              <div class="form-floating mb-3">
                <input type="text" class="form-control" id="maVatTu"
                  placeholder="Mã vật tư" disabled
                  style="color: blue;">
                <label for="maVatTu">Mã vật tư</label>
              </div>

              <div class="row g-2">
                <div class="col">
                  <div class="form-floating">
                    <input type="text" class="form-control" id="khoCanSang"
                      placeholder="Khổ cần sang" disabled
                      style="color: blue;">
                    <label for="khoCanSang">Khổ cần sang (mm)</label>
                  </div>
                </div>
                <div class="col">
                  <div class="form-floating">
                    <input type="text" class="form-control" id="khoSanPham"
                      placeholder="Khổ sản phẩm" disabled
                      style="color: blue;">
                    <label for="khoSanPham">Khổ sản phẩm (mm)</label>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Khách hàng -->
          <div class="form-floating my-4">
            <input type="text" class="form-control" id="khachHang"
              placeholder="Khách hàng" disabled style="color: blue;">
            <label for="khachHang">Khách hàng</label>
          </div>

          <!-- Vị trí -->
          <div class="row g-2 mb-4">
            <div class="col-md-4">
              <div class="d-flex">
                <input type="text" class="form-control rounded-end-0"
                  placeholder="Vị trí 1" disabled
                  style="color: blue;">
                <select class="form-select rounded-start-0" id="viTri1Select">
                  <option value="A">Vị trí A</option>
                  <option value="B">Vị trí B</option>
                  <option value="C">Vị trí C</option>
                </select>
              </div>
            </div>
            <div class="col-md-4">
              <div class="d-flex">
                <input type="text" class="form-control rounded-end-0"
                  placeholder="Vị trí 2" disabled
                  style="color: blue;">
                <select class="form-select rounded-start-0" id="viTri2Select">
                  <option value="A">Vị trí A</option>
                  <option value="B">Vị trí B</option>
                  <option value="C">Vị trí C</option>
                </select>
              </div>
            </div>
            <div class="col-md-4">
              <div class="d-flex">
                <input type="text" class="form-control rounded-end-0"
                  placeholder="Vị trí 3" disabled
                  style="color: blue;">
                <select class="form-select rounded-start-0" id="viTri3Select">
                  <option value="A">Vị trí A</option>
                  <option value="B">Vị trí B</option>
                  <option value="C">Vị trí C</option>
                </select>
              </div>
            </div>
          </div>

          <!-- Mã số cuộn, ID, Trọng lượng -->
          <div class="row g-3">
            <div class="col-md-4">
              <div class="mb-3">
                <label class="form-label fw-bold">Mã số cuộn</label>
                <div class="mb-2">
                  <select class="form-select" id="maSoCuonSelect">
                    <option value selected>-- Chọn mã số cuộn --</option>
                    <option value="TƯƠNG TỰ CUỘN TRÊN">TƯƠNG TỰ CUỘN
                      TRÊN</option>
                    <option value="GIẤY KH CUNG CẤP">GIẤY KH CUNG CẤP</option>
                    <option value="KHÔNG CÓ MÃ SỐ CUỘN">KHÔNG CÓ MÃ SỐ
                      CUỘN</option>
                    <option value="nhap">Nhập mã số cuộn...</option>
                  </select>
                </div>
                <div id="maSoCuonInputContainer" style="display: none;">
                  <input type="text" id="maSoCuon" class="form-control"
                    placeholder="Nhập mã số cuộn...">
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="mb-3">
                <label class="form-label fw-bold">Số ID (8 số)</label>

                <div class="form-check">
                  <input class="form-check-input" type="radio" name="chonSoID"
                    id="khongCoID" value="none" checked>
                  <label class="form-check-label" for="khongCoID">
                    Không có số ID
                  </label>
                </div>

                <div class="form-check mb-2">
                  <input class="form-check-input" type="radio" name="chonSoID"
                    id="nhapSoID" value="input">
                  <label class="form-check-label" for="nhapSoID">
                    Nhập số ID (8 số)
                  </label>
                </div>

                <input type="text" id="inputSoID" class="form-control mb-1"
                  placeholder="Nhập số ID" maxlength="10"
                  disabled>
                <small class="text-muted">Ví dụ: GC12345678 hoặc GS12345678 (dãy
                  trên tem thể hiện)</small>
              </div>

            </div>
            <div class="col-md-4">
              <div class="form-floating">
                <input type="text" class="form-control" id="trongLuong"
                  placeholder="Trọng lượng">
                <label for="trongLuong">Trọng lượng nhận (kg)</label>
              </div>
            </div>
          </div>

          <!-- Nút và Tiến độ -->
          <div class="text-center mt-5">
            <div class="text-success fw-bold mb-2"></div>
            <!-- <div class="progress mb-3 " style="height: 10px;">
          <div class="progress-bar bg-success" style="width: 60%;"></div>
        </div>
        <span class="ms-2">30%</span> -->
            <div class="d-flex justify-content-between align-items-center">
              <div style="width: 100%;">
                <div class="progress" style="height: 10px;">
                  <div class="progress-bar bg-success" role="progressbar"
                    style="width: 0%;" aria-valuenow="0"
                    aria-valuemin="0" aria-valuemax="100"></div>
                </div>
              </div>
              <span class="ms-2"></span>
            </div>
            <button class="btn btn-success px-5 mt-3">Bắt Đầu</button>
          </div>

        </div>

        <!-- Phần kết thúc báo cáo -->

        <div
          class="container bg-white p-4 rounded shadow position-relative border border-danger rounded-top p-3 mt-5"
          style="border-width: 2px;">
          <div class="row ">
            <div class="col-6">
              <label class="fw-bold">Khổ cần sang (mm)</label>
              <div class="d-flex gap-2">
                <input type="text" class="form-control " disabled>
                <input type="text" class="form-control " disabled>
                <input type="text" class="form-control " disabled>
              </div>
            </div>
            <div class="col-6">

              <div class="row g-2">
                <div class="col">
                  <div class="mb-3">
                    <label class="fw-bold">Số mét (m)</label>
                    <input type="text" class="form-control bg-white">
                  </div>
                </div>
                <div class="col">
                  <div class="mb-3">
                    <label class="fw-bold">Sử dụng</label>
                    <select class="form-select">
                      <option value>-- Tùy chọn MSC--</option>
                      <option value="0">0 - Chạy hết cuộn</option>
                      <option value="1">1 - Chạy không hết cuộn (Chạy
                        lỡ)</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="row mb-3">
            <div class="col-6">
              <label class="fw-bold">Số kg nhập tay (kg)</label>
              <div class="d-flex gap-2 mb-3">
                <input type="text" class="form-control bg-white">
                <input type="text" class="form-control bg-white">
                <input type="text" class="form-control bg-white">
              </div>

              <div class="mb-3">
                <label class="fw-bold">Ghi chú</label>
                <textarea class="form-control bg-white" rows="2"></textarea>
              </div>

              <!-- Dừng máy -->
              <div
                class="p-3 rounded d-flex align-items-center justify-content-between position-relative overflow-hidden"
                style="margin-top: 15px; background: linear-gradient(270deg, #D00000, #FF7272, #FFE0E0, #FF7272, #D00000); background-size: 500% 500%; animation: triColorGradient 4s ease infinite; box-shadow: 0 5px 15px rgba(208, 0, 0, 0.5); border: 2px solid #D00000; width: 80%; margin: 0 auto;">
                <div class="pulse-effect"></div>
                <div class="d-flex align-items-center position-relative"
                  style="z-index: 2;">
                  <span class="text-warning me-2"
                    style="font-size: 1.5rem; animation: warningPulse 1s infinite;">⚠</span>
                  <span class="text-white fw-bold"
                    style="text-shadow: 2px 2px 4px rgba(0,0,0,0.5); font-size: 1.2rem; letter-spacing: 1px;">DỪNG
                    MÁY</span>
                </div>
                <div class="d-flex position-relative" style="z-index: 2;">
                  <button id="btnNo" class="btn border me-2 px-4 fw-bold"
                    style="background-color: #4a90e2; color: white; box-shadow: 0 4px 8px rgba(0,0,0,0.3); transform: translateY(0); transition: all 0.2s; border-color: #3a80d2;"
                    onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 6px 12px rgba(0,0,0,0.3)';"
                    onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 8px rgba(0,0,0,0.3)';">KHÔNG</button>
                  <button id="btnYes" class="btn btn-light border px-4 fw-bold"
                    style="box-shadow: 0 4px 8px rgba(0,0,0,0.3); transform: translateY(0); transition: all 0.2s;"
                    onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 6px 12px rgba(0,0,0,0.3)';"
                    onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 8px rgba(0,0,0,0.3)';">CÓ</button>
                </div>
              </div>

            </div>
            <div class="col-6">
              <div class="row g-2">
                <div class="col">
                  <div class="mb-3">
                    <label class="fw-bold">Phế liệu đầu cuộn (kg)</label>
                    <input type="text" id="pheLieuDauCuon"
                      class="form-control bg-white">
                    <small class="text-muted">VD: 1.0</small>
                  </div>
                </div>
                <div class="col">
                  <div class="mb-3">
                    <label class="fw-bold">Phế liệu sản xuất (kg)</label>
                    <input type="text" id="pheLieuSanXuat"
                      class="form-control bg-white">
                    <small class="text-muted">Phế liệu trong quá trình sản xuất.
                      VD:
                      4.5</small>
                  </div>
                </div>
              </div>

              <div class="mb-3">
                <label class="fw-bold text-danger">Sai khổ (mm)</label>
                <div class="d-flex gap-2">
                  <input type="text" class="form-control bg-light"
                    placeholder="Khổ sai 1" id="khoSai1">
                  <input type="text" class="form-control bg-light"
                    placeholder="Khổ sai 2" id="khoSai2">
                  <input type="text" class="form-control bg-light"
                    placeholder="Khổ sai 3" id="khoSai3">
                </div>
              </div>
              <div class="mb-3">
                <label class="fw-bold text-danger">Số mét sai (mm)</label>
                <input type="text" class="form-control bg-white" id="soMetSai"
                  placeholder="Nhập số mét sai">
              </div>
              <div class="mb-3">
                <label class="fw-bold text-warning mb-1">Trọng lượng chạy sai
                  (kg)</label>
                <div class="d-flex gap-2">
                  <input type="text" class="form-control  "
                    placeholder="TL chạy sai 1" id="tlChayScai1" readonly
                    disabled>
                  <input type="text" class="form-control  "
                    placeholder="TL chạy sai 2" id="tlChaySai2" readonly
                    disabled>
                  <input type="text" class="form-control  "
                    placeholder="TL chạy sai 3" id="tlChaySai3" readonly
                    disabled>
                </div>
              </div>
            </div>
          </div>

          <!-- Phần Báo Cáo Dừng Máy -->
          <div class="mt-4 mb-4 p-3 border border-danger rounded machine-report"
            id="machineReport"
            style="width: 70%; margin: 0 auto; background-color: #FFC9CD;">
            <h5 class="text-center fw-bold mb-3">BÁO CÁO DỪNG MÁY</h5>

            <div class="row mb-3">
              <div class="col-4">
                <label class="fw-bold mb-1">Lý do dừng máy</label>
                <select class="form-select" id="stopReason">
                  <option value>-- Lý do --</option>
                  <option value="Máy hư">F1 : Máy hư</option>
                  <option value="Chờ giấy">F2 : Chờ giấy</option>
                  <option value="Chờ tiếp thị">F3 : Bảo trì định kỳ</option>
                  <option value="Chờ kế hoạch">F4 : Chờ kế hoạch</option>
                  <option value="Vệ sinh">F5 : Vệ sinh</option>
                  <option value="Khác">F6 : Khác</option>
                  <option value="Bảo dưỡng">F7 : Bảo dưỡng</option>
                  <option value="Sửa kẽm">F8 : Sửa kẽm</option>
                  <option value="Thay su">F9 : Thay su</option>
                  <option value="CHỜ KHÁCH TỚI KÝ BÀI">F10 : CHỜ KHÁCH TỚI KÝ
                    BÀI</option>
                  <option value="Cắt bảng DB">F11 : Cắt bảng DB</option>
                  <option value="Giải lao">F12 : Giải lao</option>
                  <option value="Cúp điện">F13 : Cúp điện</option>
                </select>
              </div>

              <div class="col-4 time-inputs" style="display: none;">
                <label class="fw-bold mb-1">Thời gian dừng máy</label>
                <div class="position-relative">
                  <input type="datetime-local" class="form-control"
                    id="stopTimeInput">
                  <button
                    class="btn btn-primary position-absolute top-0 end-0 h-100"
                    id="stopTimeButton"
                    style="z-index: 20; opacity: 1; pointer-events: auto; cursor: pointer !important;">
                    Dừng máy
                  </button>
                </div>
                <div class="form-text" id="stopTimeDisplay"></div>
              </div>

              <div class="col-4 time-inputs" style="display: none;">
                <label class="fw-bold mb-1">Thời gian chạy lại</label>
                <div class="position-relative">
                  <input type="datetime-local" class="form-control"
                    id="resumeTimeInput">
                  <button
                    class="btn btn-success position-absolute top-0 end-0 h-100"
                    id="resumeTimeButton"
                    style="z-index: 10;">
                    Chạy lại
                  </button>
                </div>
                <div class="form-text" id="resumeTimeDisplay"></div>
              </div>
            </div>

            <div class="row mb-3 additional-fields" style="display: none;">
              <div class="col-8">
                <label class="fw-bold mb-1">Lý do khác</label>
                <input type="text" class="form-control"
                  placeholder="Nhập lý do..." id="otherReason">
              </div>
              <div class="col-4">
                <label class="fw-bold mb-1 text-primary">Thời gian dừng
                  máy</label>
                <input type="text" class="form-control bg-light"
                  id="stopDuration" readonly>
              </div>
            </div>

            <div class="d-flex justify-content-end">
              <button class="btn btn-danger">
                <i class="bi bi-trash">🗑️</i>
              </button>
            </div>

            <!-- Container cho các lý do bổ sung sẽ được thêm tại đây -->
            <div id="additionalReasonsContainer"></div>

            <!-- Nút thêm lý do mới -->
            <!-- <div class="row mt-4 mb-3 add-reason-section" style="display: none;">
            <div class="col-12">
              <hr>
              <button id="addReasonBtn" class="btn btn-primary w-100">
                <i class="bi bi-plus-circle me-2">+</i> Thêm lý do dừng máy
              </button>
            </div>
          </div> -->

          </div>

          <!-- <div class="row mb-3">
          <div class="col-12">
            <div class="d-flex justify-content-between align-items-center">
              <div style="width: 100%;">
                <div class="progress" style="height: 10px;">
                  <div class="progress-bar bg-danger" role="progressbar" style="width: 30%;" aria-valuenow="0"
                    aria-valuemin="0" aria-valuemax="100"></div>
                </div>
              </div>
              <span class="ms-2"></span>
            </div>
          </div>
        </div> -->

          <div class="row">
            <div class="col-12 d-flex justify-content-end">
              <button class="btn btn-primary">Xác nhận</button>
            </div>
          </div>
        </div>

      </div>

      <!-- Phần danh sách báo cáo -->
      <div class="tab-pane fade" id="nav-danhsachscl" role="tabpanel"
        aria-labelledby="nav-danhsachscl-tab" tabindex="0">

        <div class="mx-5 bg-white p-4 rounded shadow mt-4 ">
          <h2 class="mb-4 text-success text-center">Danh sách báo cáo SCL</h2>

          <!-- Phần tìm kiếm và lọc -->
          <div class="row mb-4">
            <div class="col-md-3">
              <div class="input-group mb-2">
                <input type="text" class="form-control" id="searchInput"
                  placeholder="Tìm kiếm...">
                <button class="btn btn-outline-secondary" type="button"
                  id="btnSearch">
                  <i class="fas fa-search"></i>
                </button>
              </div>
              <div class>
                <select class="form-select mb-2" id="caFilter">
                  <option value>-- Tất cả ca --</option>
                  <option value="0">Ca A</option>
                  <option value="1">Ca B</option>
                  <option value="2">Ca HC</option>
                </select>
              </div>
            </div>
            <div class="col-md-4">
              <div class="date-filter-container border rounded p-2 mb-2">
                <div class="row g-2">
                  <div class="col-5">
                    <label for="startDateFilter"
                      class="form-label small mb-1">Từ ngày:</label>
                    <input type="datetime-local"
                      class="form-control form-control-sm" id="startDateFilter">
                  </div>
                  <div class="col-5">
                    <label for="endDateFilter" class="form-label small mb-1">Đến
                      ngày:</label>
                    <input type="datetime-local"
                      class="form-control form-control-sm" id="endDateFilter">
                  </div>
                  <div class="col-2">
                    <label class="form-label small mb-1">&nbsp;</label>
                    <div class="d-grid gap-1">
                      <button class="btn btn-primary btn-sm" id="btnDateFilter">
                        <i class="fas fa-filter"></i> Lọc
                      </button>
                      <button class="btn btn-outline-secondary btn-sm"
                        id="btnClearDateFilter">
                        <i class="fas fa-times"></i> Xóa
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Chọn số mục hiển thị -->
          <div class="d-flex justify-content-between align-items-center mb-3">
            <div>
              <span>Hiển thị </span>
              <select id="itemsPerPage"
                class="form-select form-select-sm d-inline-block w-auto mx-1">
                <option value="10">10</option>
                <option value="20">20</option>
                <option value="50">50</option>
                <option value="100">100</option>
              </select>
              <span> mục</span>
            </div>
            <div class="d-flex justify-content-between align-items-center ">
              <div id="totalItems">Tổng số: 0 bản ghi</div>
              <button class="btn btn-success btn-sm ms-3" id="btnFixColumns">
                <i class="fas fa-thumbtack me-1"></i> Cố định cột
              </button>
            </div>

          </div>

          <!-- Bảng danh sách -->
          <div class="table-responsive">
            <table
              class="table table-striped table-hover table-bordered text-center">
              <thead class="table-light">
                <tr>
                  <th class="text-nowrap" style="min-width: 120px;">Thao
                    tác</th>
                  <th class="text-nowrap" style="min-width: 60px;">STT</th>
                  <th class="text-nowrap" style="min-width: 150px;">Ca + Người
                    thực hiện</th>
                  <th class="text-nowrap" style="min-width: 100px;">Ngày</th>
                  <th class="text-nowrap" style="min-width: 120px;">Số Phiếu
                    SC</th>
                  <th class="text-nowrap" style="min-width: 80px;">Số lần</th>
                  <th class="text-nowrap" style="min-width: 120px;">Số
                    Worksheet</th>
                  <th class="text-nowrap" style="min-width: 150px;">Khách
                    hàng</th>
                  <th class="text-nowrap" style="min-width: 250px;">Mã giấy</th>
                  <th class="text-nowrap" style="min-width: 120px;">Định
                    Lượng</th>
                  <th class="text-nowrap" style="min-width: 100px;">Khổ
                    (mm)</th>
                  <th class="text-nowrap" style="min-width: 120px;">So sánh
                    khổ</th>
                  <th class="text-nowrap" style="min-width: 180px;">Mã số
                    cuộn</th>
                  <th class="text-nowrap" style="min-width: 80px;">TLN</th>
                  <th class="text-nowrap" style="min-width: 200px;">TG BẮT
                    ĐẦU</th>
                  <th class="text-nowrap" style="min-width: 200px;">TG Kết
                    Thúc</th>
                  <th class="text-nowrap" style="min-width: 160px;">Khổ sản phẩm
                    (mm)</th>
                  <th class="text-nowrap" style="min-width: 160px;">Khổ cần sang
                    (mm)</th>
                  <th class="text-nowrap" style="min-width: 100px;">Khổ 1</th>
                  <th class="text-nowrap" style="min-width: 100px;">Khổ 2</th>
                  <th class="text-nowrap" style="min-width: 100px;">Khổ 3</th>
                  <th class="text-nowrap" style="min-width: 100px;">Số mét</th>
                  <th class="text-nowrap" style="min-width: 150px;">Hoàn thành
                    cuộn</th>
                  <th class="text-nowrap" style="min-width: 100px;">Nhập kho
                    1</th>
                  <th class="text-nowrap" style="min-width: 100px;">Nhập kho
                    2</th>
                  <th class="text-nowrap" style="min-width: 100px;">Nhập kho
                    3</th>
                  <th class="text-nowrap" style="min-width: 100px;">Trả kho</th>
                  <th class="text-nowrap" style="min-width: 180px;">Phế liệu đầu
                    cuộn (Kg)</th>
                  <th class="text-nowrap" style="min-width: 180px;">Phế liệu sản
                    xuất (Kg)</th>
                  <th class="text-nowrap" style="min-width: 100px;">Số cuộn</th>
                  <th class="text-nowrap" style="min-width: 150px;">Ghi chú</th>
                  <th class="text-nowrap" style="min-width: 120px;">Thứ tự
                    cuộn</th>
                  <th class="text-nowrap" style="min-width: 100px;">Số ID</th>
                  <th class="text-nowrap" style="min-width: 100px;">Vị trí
                    1</th>
                  <th class="text-nowrap" style="min-width: 100px;">Vị trí
                    2</th>
                  <th class="text-nowrap" style="min-width: 100px;">Vị trí
                    3</th>
                  <th class="text-nowrap" style="min-width: 180px;">Trọng lượng
                    cân lại 1</th>
                  <th class="text-nowrap" style="min-width: 180px;">Trọng lượng
                    cân lại 2</th>
                  <th class="text-nowrap" style="min-width: 180px;">Trọng lượng
                    cân lại 3</th>
                  <th class="text-nowrap" style="min-width: 150px;">Số mét chạy
                    sai</th>
                  <th class="text-nowrap" style="min-width: 150px;">Khổ sai 1
                    (mm)</th>
                  <th class="text-nowrap" style="min-width: 150px;">Khổ sai 2
                    (mm)</th>
                  <th class="text-nowrap" style="min-width: 150px;">Khổ sai 3
                    (mm)</th>
                  <th class="text-nowrap" style="min-width: 200px;">Trọng lượng
                    chạy sai 1 (kg)</th>
                  <th class="text-nowrap" style="min-width: 200px;">Trọng lượng
                    chạy sai 2 (kg)</th>
                  <th class="text-nowrap" style="min-width: 200px;">Trọng lượng
                    chạy sai 3 (kg)</th>
                </tr>
              </thead>
              <tbody id="reportTableBody">
                <!-- Dữ liệu sẽ được hiển thị ở đây -->
              </tbody>
            </table>
          </div>

          <!-- Phân trang -->
          <div class="d-flex justify-content-between align-items-center mt-4">
            <div>
              <span id="pageInfo">Hiển thị 0-0 của 0</span>
            </div>
            <nav aria-label="Page navigation">
              <ul class="pagination" id="pagination">
                <li class="page-item">
                  <a class="page-link" href="#" id="firstPage">Trang đầu</a>
                </li>
                <li class="page-item">
                  <a class="page-link" href="#" id="prevPage">Trang trước</a>
                </li>
                <!-- Các nút trang số sẽ được thêm ở đây -->
                <li class="page-item">
                  <a class="page-link" href="#" id="nextPage">Trang sau</a>
                </li>
                <li class="page-item">
                  <a class="page-link" href="#" id="lastPage">Trang cuối</a>
                </li>
              </ul>
            </nav>
          </div>

          <div class="d-flex justify-content-start mt-4">
            <button class="btn btn-success" id="btnExportExcel">
              <i class="fas fa-file-excel me-2"></i>
              Xuất Excel
            </button>
          </div>
        </div>

      </div>

      <!-- Phần dừng máy của báo cáo -->
      <div class="tab-pane fade" id="nav-dungmayscl" role="tabpanel"
        aria-labelledby="nav-dungmayscl-tab" tabindex="0">

        <div class="mx-5 bg-white p-4 rounded shadow mt-4">
          <h2 class="mb-4 text-danger text-center">Danh sách báo cáo dừng
            máy</h2>

          <!-- Phần tìm kiếm và lọc -->
          <!-- <div class="row mb-4">
          <div class="col-md-3">
            <div class="input-group mb-2">
              <input type="text" class="form-control" id="searchStopInput" placeholder="Tìm kiếm...">
              <button class="btn btn-outline-secondary" type="button" id="btnSearchStop">
                <i class="fas fa-search"></i>
              </button>
            </div>
            <div class="">
              <select class="form-select mb-2" id="caStopFilter">
                <option value="">-- Tất cả ca --</option>
                <option value="0">Ca A</option>
                <option value="1">Ca B</option>
                <option value="2">Ca HC</option>
              </select>
            </div>
          </div>
          
        </div> -->

          <!-- Chọn số mục hiển thị -->
          <div class="d-flex justify-content-between align-items-center mb-3">
            <div>
              <span>Hiển thị </span>
              <select id="itemsPerStopPage"
                class="form-select form-select-sm d-inline-block w-auto mx-1">
                <option value="10">10</option>
                <option value="20">20</option>
                <option value="50">50</option>
                <option value="100">100</option>
              </select>
              <span> mục</span>
            </div>
            <div id="totalStopItems">Tổng số: 0 bản ghi</div>
          </div>

          <!-- Bảng danh sách -->
          <div class="table-responsive">
            <table
              class="table table-striped table-hover table-bordered text-center">
              <thead class="table-light">
                <tr>
                  <th class="text-nowrap" style="min-width: 60px;">STT</th>
                  <th class="text-nowrap" style="min-width: 150px;">Ca + Người
                    thực hiện</th>
                  <th class="text-nowrap" style="min-width: 120px;">Số
                    Worksheet</th>
                  <th class="text-nowrap" style="min-width: 120px;">Số Phiếu
                    SC</th>
                  <th class="text-nowrap" style="min-width: 180px;">Thời gian
                    dừng máy</th>
                  <th class="text-nowrap" style="min-width: 180px;">Thời gian
                    chạy lại</th>
                  <th class="text-nowrap" style="min-width: 180px;">Thời gian
                    dừng</th>
                  <th class="text-nowrap" style="min-width: 200px;">Lý do dừng
                    máy</th>
                  <th class="text-nowrap" style="min-width: 200px;">Ghi chú</th>
                  <th class="text-nowrap" style="min-width: 120px;">Thao
                    tác</th>
                </tr>
              </thead>
              <tbody id="stopReportTableBody">

              </tbody>
            </table>
          </div>

          <!-- Phân trang -->
          <div class="d-flex justify-content-between align-items-center mt-4">
            <div>
              <span id="stopPageInfo">Hiển thị 0-0 của 0</span>
            </div>
            <nav aria-label="Page navigation">
              <ul class="pagination" id="stopPagination">
                <li class="page-item">
                  <a class="page-link" href="#" id="firstStopPage">Trang đầu</a>
                </li>
                <li class="page-item">
                  <a class="page-link" href="#" id="prevStopPage">Trang
                    trước</a>
                </li>
                <!-- Các nút trang số sẽ được thêm ở đây -->
                <li class="page-item">
                  <a class="page-link" href="#" id="nextStopPage">Trang sau</a>
                </li>
                <li class="page-item">
                  <a class="page-link" href="#" id="lastStopPage">Trang cuối</a>
                </li>
              </ul>
            </nav>
          </div>
        </div>

      </div>

    </div>

    <script src="./script.js"></script>
    <script src="../auth.js"></script>
    <script src="../utils.js"></script>
    <!-- <script src="./fix-bug.js"></script>
  <script src="./fix-dung-may.js"></script> -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
    // PHẦN ID 8 SỐ
    //  hàm kiểm tra format ID
function validateSoID(idValue) {
  // Kiểm tra format: 2 ký tự chữ + 8 số
  const idRegex = /^[A-Za-z]{2}\d{8}$/;
  return idRegex.test(idValue);
}

// Sửa text mô tả
const idDescription = document.querySelector('#nhapSoID').closest('.mb-3').querySelector('small');
if (idDescription) {
  idDescription.textContent = 'Ví dụ: AB12345678 (2 ký tự chữ + 8 số)';
}

//  kiểm tra khi nhập ID
document.getElementById('inputSoID').addEventListener('input', function() {
  if (this.value && !validateSoID(this.value)) {
    this.classList.add('is-invalid');
    // Tạo thông báo lỗi nếu chưa có
    if (!this.nextElementSibling || !this.nextElementSibling.classList.contains('invalid-feedback')) {
      const feedback = document.createElement('div');
      feedback.classList.add('invalid-feedback');
      feedback.textContent = 'ID phải có 2 ký tự chữ + 8 số (VD: AB12345678)';
      this.after(feedback);
    }
  } else {
    this.classList.remove('is-invalid');
  }
});
  </script>
  </body>

</html>